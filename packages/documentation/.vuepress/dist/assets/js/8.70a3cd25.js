(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{368:function(e,a,t){"use strict";t.r(a);var r=t(42),s=Object(r.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"dev-prerequisite"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#dev-prerequisite"}},[e._v("#")]),e._v(" Dev prerequisite")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://nodejs.org/en/",target:"_blank",rel:"noopener noreferrer"}},[e._v("NodeJS 10"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://yarnpkg.com/en/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Yarn v1.13.0"),t("OutboundLink")],1)]),e._v(" "),t("li",[t("a",{attrs:{href:"https://www.mongodb.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MongoDB >= v3.4.18"),t("OutboundLink")],1),e._v(" "),t("ul",[t("li",[e._v("if installed locally "),t("code",[e._v("mongod")]),e._v(" to start")]),e._v(" "),t("li",[t("code",[e._v("brew install mongodb@3.4")]),e._v(" on mac")]),e._v(" "),t("li",[e._v("for DB migration see "),t("a",{attrs:{href:"https://stackoverflow.com/questions/51227939/using-brew-upgrade-mongo-update-from-3-4-to-4-0-error-the-data-files-need-to-be",target:"_blank",rel:"noopener noreferrer"}},[e._v("this post"),t("OutboundLink")],1)])])]),e._v(" "),t("li",[e._v("a SMTP server ("),t("a",{attrs:{href:"https://github.com/djfarrelly/MailDev",target:"_blank",rel:"noopener noreferrer"}},[e._v("maildev"),t("OutboundLink")],1),e._v(" will be installed for you)")]),e._v(" "),t("li",[t("a",{attrs:{href:"http://sharp.dimens.io/en/stable/",target:"_blank",rel:"noopener noreferrer"}},[e._v("sharp"),t("OutboundLink")],1),e._v(" should work out the box most of the time. In case of troubles see "),t("a",{attrs:{href:"http://sharp.dimens.io/en/stable/install/",target:"_blank",rel:"noopener noreferrer"}},[e._v("sharp installation instructions"),t("OutboundLink")],1),e._v(". MacOs will need XCode in order to compile.")])]),e._v(" "),t("p",[e._v("You need to have:")]),e._v(" "),t("ul",[t("li",[e._v("clone/fork the project")]),e._v(" "),t("li",[e._v("in your terminal, go in the folder")]),e._v(" "),t("li",[e._v("run "),t("code",[e._v("yarn install")]),e._v(" in the root folder")])]),e._v(" "),t("h2",{attrs:{id:"updating-the-code"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#updating-the-code"}},[e._v("#")]),e._v(" Updating the code")]),e._v(" "),t("p",[e._v("It should have a default config for dev already setup.\nIf you want to change some, create "),t("code",[e._v(".lepatronrc")]),e._v(" at the root of the project then fill with the values you want to overrride as described in the "),t("code",[e._v(".lepatronrc-example")])]),e._v(" "),t("p",[e._v("those are the main developer commands:")]),e._v(" "),t("h3",{attrs:{id:"build-the-project-for-production"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#build-the-project-for-production"}},[e._v("#")]),e._v(" Build the project for "),t("em",[e._v("production")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn build\n")])])]),t("h3",{attrs:{id:"start-a-server-configured-for-production"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#start-a-server-configured-for-production"}},[e._v("#")]),e._v(" Start a server configured for "),t("em",[e._v("production")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn start\n")])])]),t("p",[e._v("server will be running on "),t("code",[e._v("localhost:3000")])]),e._v(" "),t("h3",{attrs:{id:"build-and-start-a-production-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#build-and-start-a-production-server"}},[e._v("#")]),e._v(" Build and start a "),t("em",[e._v("production")]),e._v(" server")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn prod\n")])])]),t("h3",{attrs:{id:"build-and-start-a-development-server"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#build-and-start-a-development-server"}},[e._v("#")]),e._v(" Build and start a "),t("em",[e._v("development")]),e._v(" server")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn dev\n")])])]),t("ul",[t("li",[e._v("server will be running on "),t("code",[e._v("localhost:3000")])]),e._v(" "),t("li",[e._v("server will be restarted on files changes")]),e._v(" "),t("li",[e._v("build will be updated on files changes also")])]),e._v(" "),t("h3",{attrs:{id:"generate-the-api-documentation"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#generate-the-api-documentation"}},[e._v("#")]),e._v(" Generate the API Documentation")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn build:documentation\n")])])]),t("h3",{attrs:{id:"show-this-documentation-with-vuepress"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#show-this-documentation-with-vuepress"}},[e._v("#")]),e._v(" Show this documentation with "),t("a",{attrs:{href:"https://vuepress.vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("VuePress"),t("OutboundLink")],1)]),e._v(" "),t("p",[e._v("This documentation can be served in a cleaner way with following command:")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn build:documentation\n")])])]),t("p",[e._v("Documentation will be served on "),t("a",{attrs:{href:"http://localhost:8080/",target:"_blank",rel:"noopener noreferrer"}},[e._v("http://localhost:8080/"),t("OutboundLink")],1)]),e._v(" "),t("h3",{attrs:{id:"make-a-release"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#make-a-release"}},[e._v("#")]),e._v(" Make a release")]),e._v(" "),t("p",[e._v("You can make a release of any branch.\nOn heroku:")]),e._v(" "),t("ul",[t("li",[e._v("the following will yarn script will be used to build "),t("code",[e._v("yarn heroku-postbuild")])]),e._v(" "),t("li",[e._v("after that the server will be launched with the content of the "),t("code",[e._v("Procfile")])])]),e._v(" "),t("h4",{attrs:{id:"legacy-release-deprecated"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#legacy-release-deprecated"}},[e._v("#")]),e._v(" legacy release (deprecated)")]),e._v(" "),t("p",[e._v("Prior to the Nuxt Version a custom script was passed:\nIt builds the application on the "),t("code",[e._v("build")]),e._v(" branch (thus the existence of this build branch)")]),e._v(" "),t("p",[e._v("It's no longer relevant")]),e._v(" "),t("h3",{attrs:{id:"databases-scripts"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#databases-scripts"}},[e._v("#")]),e._v(" Databases scripts")]),e._v(" "),t("p",[t("code",[e._v(".lepatronrc")]),e._v(" should be provided with "),t("em",[e._v("dbConfigs")]),e._v(" infos. See "),t("code",[e._v(".lepatronrc-example")]),e._v(" for more informations")]),e._v(" "),t("h4",{attrs:{id:"sync-db"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#sync-db"}},[e._v("#")]),e._v(" sync-db")]),e._v(" "),t("ul",[t("li",[e._v("can copy one DB into another")]),e._v(" "),t("li",[e._v("can also copy a snapshot saved in "),t("code",[e._v("images.tmpDir")]),e._v(" (see below) into another")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn sync-db\n")])])]),t("h4",{attrs:{id:"backup-db"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#backup-db"}},[e._v("#")]),e._v(" backup-db")]),e._v(" "),t("ul",[t("li",[e._v("will save a snapshot of the specified DB in the folder defined by "),t("code",[e._v("images.tmpDir")]),e._v(" config")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn backup-db\n")])])]),t("h4",{attrs:{id:"local-db"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#local-db"}},[e._v("#")]),e._v(" local-db")]),e._v(" "),t("ul",[t("li",[e._v("save a "),t("em",[e._v("local db")]),e._v(" snapshot")]),e._v(" "),t("li",[e._v("restore it later")])]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn local-db\n")])])]),t("h3",{attrs:{id:"s3-notes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#s3-notes"}},[e._v("#")]),e._v(" S3 notes")]),e._v(" "),t("p",[e._v("This is some script to backup a bucket or sync a bucket from a backup.\nThis is mostly use for development purpose.")]),e._v(" "),t("h4",{attrs:{id:"requirements"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#requirements"}},[e._v("#")]),e._v(" requirements")]),e._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"http://docs.aws.amazon.com/cli/latest/reference/",target:"_blank",rel:"noopener noreferrer"}},[e._v("aws cli"),t("OutboundLink")],1),e._v(" â€“ "),t("code",[e._v("brew install awscli")]),e._v(" on a mac")]),e._v(" "),t("li",[t("code",[e._v(".lepatronrc")]),e._v(" filled with s3Configs parameters. See "),t("code",[e._v(".lepatronrc-example")])])]),e._v(" "),t("p",[t("a",{attrs:{href:"http://stackoverflow.com/questions/17832860/backup-strategies-for-aws-s3-bucket#answer-32927276",target:"_blank",rel:"noopener noreferrer"}},[e._v("more details about why we use the aws cli"),t("OutboundLink")],1)]),e._v(" "),t("h4",{attrs:{id:"backing-up-to-a-local-folder"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#backing-up-to-a-local-folder"}},[e._v("#")]),e._v(" backing up to a local folder")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn backup-s3\n")])])]),t("h4",{attrs:{id:"syncing-a-bucket-from-a-local-folder"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#syncing-a-bucket-from-a-local-folder"}},[e._v("#")]),e._v(" syncing a bucket from a local folder")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("yarn sync-s3\n")])])])])}),[],!1,null,null,null);a.default=s.exports}}]);