(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{356:function(e,t,a){e.exports=a.p+"assets/img/badsender-architecture.0434feab.svg"},364:function(e,t,a){"use strict";a.r(t);var r=a(42),s=Object(r.a)({},(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"badsender-email-builder"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#badsender-email-builder"}},[e._v("#")]),e._v(" Badsender email builder")]),e._v(" "),r("p",[e._v("The badsender application is build around "),r("a",{attrs:{href:"https://github.com/voidlabs/mosaico",target:"_blank",rel:"noopener noreferrer"}},[e._v("Voidlabs' Mosaico mailing editor"),r("OutboundLink")],1),r("br"),e._v(" "),r("strong",[e._v("Voidlabs' Mosaico")]),e._v(" is a standalone front application build upon "),r("a",{attrs:{href:"https://knockoutjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Knockout"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("The "),r("strong",[e._v("Mosaico editor")]),e._v(" is build around two main key concepts:")]),e._v(" "),r("ul",[r("li",[r("strong",[e._v("template:")]),e._v(" an HTML file that will define any interactive blocks & their data representation")]),e._v(" "),r("li",[r("strong",[e._v("mailing:")]),e._v(" a JSON object based on the template used")])]),e._v(" "),r("p",[e._v("The "),r("strong",[e._v("Badsender's backend")]),e._v(" will:")]),e._v(" "),r("ul",[r("li",[e._v("persist "),r("strong",[e._v("templates")]),e._v(" & "),r("strong",[e._v("mailings")])]),e._v(" "),r("li",[e._v("handle "),r("strong",[e._v("users")])]),e._v(" "),r("li",[e._v("handle rights to templates & mailings via the concept of "),r("strong",[e._v("groups")])]),e._v(" "),r("li",[e._v("handle "),r("strong",[e._v("images storage")])])]),e._v(" "),r("p",[e._v("The "),r("strong",[e._v("Badsender's backend")]),e._v(" is build upon "),r("a",{attrs:{href:"https://nuxtjs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("NuxtJS"),r("OutboundLink")],1),e._v("/"),r("a",{attrs:{href:"https://vuejs.org/",target:"_blank",rel:"noopener noreferrer"}},[e._v("VueJS"),r("OutboundLink")],1),e._v(", "),r("a",{attrs:{href:"https://expressjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("ExpressJS"),r("OutboundLink")],1),e._v(" & "),r("a",{attrs:{href:"https://www.mongodb.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("MongoDB"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("img",{attrs:{src:a(356),alt:"badsender architecture"}})]),e._v(" "),r("h2",{attrs:{id:"files-organization"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#files-organization"}},[e._v("#")]),e._v(" files organization")]),e._v(" "),r("h3",{attrs:{id:"inherited-folders-files-from-mosaico"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#inherited-folders-files-from-mosaico"}},[e._v("#")]),e._v(" inherited folders & files from mosaico")]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",[e._v("Name")]),e._v(" "),r("th",[e._v("mosaico's scope")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("packages/editor/CONTRIBUTING.md")]),e._v(" "),r("td",[e._v("contributing guidelines")])]),e._v(" "),r("tr",[r("td",[e._v("packages/editor/LICENSE")]),e._v(" "),r("td")]),e._v(" "),r("tr",[r("td",[e._v("packages/editor/NOTICE.txt")]),e._v(" "),r("td",[e._v("editor dependencies license")])]),e._v(" "),r("tr",[r("td",[e._v("packages/editor/README.md")]),e._v(" "),r("td",[e._v("original mosaicos's README")])]),e._v(" "),r("tr",[r("td",[e._v("packages/editor/appveyor.yml")]),e._v(" "),r("td")]),e._v(" "),r("tr",[r("td",[e._v("packages/editor/backend")]),e._v(" "),r("td",[e._v("simple development backend")])]),e._v(" "),r("tr",[r("td",[e._v("res")]),e._v(" "),r("td",[e._v("editor statics")])]),e._v(" "),r("tr",[r("td",[e._v("packages/editor/server-config.js")]),e._v(" "),r("td",[e._v("simple testing backend configuration")])]),e._v(" "),r("tr",[r("td",[e._v("packages/editor/spec")]),e._v(" "),r("td",[e._v("app test files")])]),e._v(" "),r("tr",[r("td",[e._v("packages/editor/src")]),e._v(" "),r("td",[e._v("front application source files")])]),e._v(" "),r("tr",[r("td",[e._v("packages/editor/templates")]),e._v(" "),r("td",[e._v("mosaico's template")])])])]),e._v(" "),r("h3",{attrs:{id:"express-nuxt-application"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#express-nuxt-application"}},[e._v("#")]),e._v(" Express/Nuxt application")]),e._v(" "),r("table",[r("thead",[r("tr",[r("th",[e._v("Name")]),e._v(" "),r("th",[e._v("mosaico's scope")])])]),e._v(" "),r("tbody",[r("tr",[r("td",[e._v("packages/server")]),e._v(" "),r("td",[e._v("all the files for back server, scoped by domain (Express)")])]),e._v(" "),r("tr",[r("td",[e._v("packages/ui")]),e._v(" "),r("td",[e._v("all the files for front (Nuxt)")])]),e._v(" "),r("tr",[r("td",[e._v("packages/documentation")]),e._v(" "),r("td",[e._v("all documentation relative to Badsender's code")])]),e._v(" "),r("tr",[r("td",[e._v("packages/documentation/api")]),e._v(" "),r("td",[e._v("API doc generated by "),r("a",{attrs:{href:"https://apidocjs.com/",target:"_blank",rel:"noopener noreferrer"}},[e._v("apiDoc"),r("OutboundLink")],1),e._v(" with the command "),r("code",[e._v("build:api-documentation")])])]),e._v(" "),r("tr",[r("td",[e._v("gulpfile")]),e._v(" "),r("td",[e._v("build script replacement for the Grunfile."),r("br"),e._v(" This allowed us to fine-tune the build process without mangling with the original script")])]),e._v(" "),r("tr",[r("td",[e._v("node.config.js")]),e._v(" "),r("td",[e._v("all configuration variables (handled by "),r("a",{attrs:{href:"https://www.npmjs.com/package/rc",target:"_blank",rel:"noopener noreferrer"}},[e._v("rc package"),r("OutboundLink")],1),e._v(")")])]),e._v(" "),r("tr",[r("td",[e._v("nuxt.config.js")]),e._v(" "),r("td",[e._v("The "),r("a",{attrs:{href:"https://nuxtjs.org/api/configuration-build",target:"_blank",rel:"noopener noreferrer"}},[e._v("nuxt configuration"),r("OutboundLink")],1),r("br"),e._v(" use some variables of the node.config.js")])]),e._v(" "),r("tr",[r("td",[e._v(".nvmrc")]),e._v(" "),r("td",[e._v("The "),r("a",{attrs:{href:"https://github.com/nvm-sh/nvm",target:"_blank",rel:"noopener noreferrer"}},[e._v("nvm (Node Version Manager)"),r("OutboundLink")],1),e._v(" configuration file")])]),e._v(" "),r("tr",[r("td",[e._v("Procfile")]),e._v(" "),r("td",[r("a",{attrs:{href:"https://devcenter.heroku.com/articles/procfile",target:"_blank",rel:"noopener noreferrer"}},[e._v("Heroku file"),r("OutboundLink")],1),e._v(" to launch server process")])])])]),e._v(" "),r("h2",{attrs:{id:"api-documentation"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#api-documentation"}},[e._v("#")]),e._v(" API documentation")]),e._v(" "),r("p",[e._v("will be exposed on the route "),r("code",[e._v("/api/documentation")])]),e._v(" "),r("h2",{attrs:{id:"editor-s-editable-mobile-preview"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#editor-s-editable-mobile-preview"}},[e._v("#")]),e._v(" Editor's editable mobile preview")]),e._v(" "),r("p",[e._v("Mosaico give us the ability to preview a mobile template."),r("br"),e._v("\nIt does that by rendering the HTML in a iFrame.")]),e._v(" "),r("p",[e._v("In order to enable it on the editable part we rely on some "),r("em",[e._v("hacks")]),e._v(":")]),e._v(" "),r("ul",[r("li",[r("p",[e._v("Mosaico add "),r("code",[e._v(".is-mobile-preview")]),e._v(" or "),r("code",[e._v(".is-desktop-preview")]),e._v(" classes to the "),r("code",[e._v("#page")]),e._v(" in accordance to the preview button state")])]),e._v(" "),r("li",[r("p",[e._v("Mosaico was modified to prevent the automatic "),r("code",[e._v("#main-wysiwyg-area")]),e._v(" scoping to the template class if "),r("code",[e._v("#main-wysiwyg-area")]),e._v(" is already found in the rule")]),e._v(" "),r("ul",[r("li",[e._v("the automatic style scoping prevent styles coming from the template to leak in the editor")]),e._v(" "),r("li",[e._v("this is not the case in the iFrame preview (already scoped by the iFrame)")])])])]),e._v(" "),r("p",[e._v("In order to achieve a coherent rendering between the preview & the editable part you will need in your templates to:")]),e._v(" "),r("ul",[r("li",[e._v("copy the content of your media queries")]),e._v(" "),r("li",[e._v("duplicate them in class scoped by "),r("code",[e._v(".is-mobile-preview #main-wysiwyg-area")]),e._v(" or "),r("code",[e._v(".is-desktop-preview #main-wysiwyg-area")])])]),e._v(" "),r("p",[e._v("Those classes are not (yet) remove during download")]),e._v(" "),r("h2",{attrs:{id:"templates-preview-block-thumbs"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#templates-preview-block-thumbs"}},[e._v("#")]),e._v(" templates preview & block thumbs")]),e._v(" "),r("h3",{attrs:{id:"controlling-the-template-display"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#controlling-the-template-display"}},[e._v("#")]),e._v(" controlling the template display")]),e._v(" "),r("p",[e._v("From the "),r("a",{attrs:{href:"https://github.com/voidlabs/mosaico/issues/246",target:"_blank",rel:"noopener noreferrer"}},[e._v("creator answer"),r("OutboundLink")],1)]),e._v(" "),r("blockquote",[r("p",[e._v("[…]"),r("a",{attrs:{href:"https://github.com/voidlabs/mosaico/wiki/Template-language#data-ko-attributes",target:"_blank",rel:"noopener noreferrer"}},[e._v("data-ko-display"),r("OutboundLink")],1),e._v(" will remove any "),r("code",[e._v("display: none")]),e._v(' style from the element it is applied to. […] So your "html" can be opened in a browser and show you a correct version of your template […].')]),e._v(" "),r("p",[r("strong",[e._v('The "thumbnailer" task also add a '),r("code",[e._v("preview")]),e._v(" class to the body of your template before previewing.")]),e._v(" This means that you can even add custom CSS styles that will only be applied during the preview, e.g:")]),e._v(" "),r("div",{staticClass:"language-html extra-class"},[r("pre",{pre:!0,attrs:{class:"language-html"}},[r("code",[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("<")]),e._v("style")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("type")]),r("span",{pre:!0,attrs:{class:"token attr-value"}},[r("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[e._v("=")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')]),e._v("text/css"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v('"')])]),e._v(" "),r("span",{pre:!0,attrs:{class:"token attr-name"}},[e._v("data-ko-remove")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),r("span",{pre:!0,attrs:{class:"token style"}},[r("span",{pre:!0,attrs:{class:"token language-css"}},[e._v("\n  "),r("span",{pre:!0,attrs:{class:"token selector"}},[e._v(".preview .block")]),e._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),r("span",{pre:!0,attrs:{class:"token property"}},[e._v("border")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" 3px solid red"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])]),r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token tag"}},[r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("</")]),e._v("style")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(">")])]),e._v("\n")])])]),r("p",[e._v("This style will be removed by mosaico, but will be used by the thumbnailer.")])]),e._v(" "),r("h3",{attrs:{id:"on-the-server"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#on-the-server"}},[e._v("#")]),e._v(" on the server")]),e._v(" "),r("p",[e._v("just go on the template page & click on "),r("code",[e._v("generate preview")])]),e._v(" "),r("h3",{attrs:{id:"in-local"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#in-local"}},[e._v("#")]),e._v(" in local")]),e._v(" "),r("p",[e._v("mailing should be under the "),r("code",[e._v("/templates")]),e._v(" folder")]),e._v(" "),r("div",{staticClass:"language- extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("yarn thumbnail\n")])])]),r("p",[e._v("thumbnails will be generated in the "),r("code",[e._v("edres")]),e._v(" mailing folder")])])}),[],!1,null,null,null);t.default=s.exports}}]);