<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Badsender email builder</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.8c06f092.css" as="style"><link rel="preload" href="/assets/js/app.5a65e93c.js" as="script"><link rel="preload" href="/assets/js/2.27aee9da.js" as="script"><link rel="preload" href="/assets/js/6.3e3e9179.js" as="script"><link rel="prefetch" href="/assets/js/10.13891420.js"><link rel="prefetch" href="/assets/js/3.f8588248.js"><link rel="prefetch" href="/assets/js/4.48fd6899.js"><link rel="prefetch" href="/assets/js/5.f3b0464d.js"><link rel="prefetch" href="/assets/js/7.691b632f.js"><link rel="prefetch" href="/assets/js/8.70a3cd25.js"><link rel="prefetch" href="/assets/js/9.cdbb9cb7.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8c06f092.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" aria-current="page" class="home-link router-link-exact-active router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/index.html" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/development.html" class="nav-link">
  development
</a></div><div class="nav-item"><a href="/mosaico.html" class="nav-link">
  mosaico
</a></div><div class="nav-item"><a href="/heroku-configuration.html" class="nav-link">
  hosting
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/index.html" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/development.html" class="nav-link">
  development
</a></div><div class="nav-item"><a href="/mosaico.html" class="nav-link">
  mosaico
</a></div><div class="nav-item"><a href="/heroku-configuration.html" class="nav-link">
  hosting
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Badsender email builder</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/#files-organization" class="sidebar-link">files organization</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#inherited-folders-files-from-mosaico" class="sidebar-link">inherited folders &amp; files from mosaico</a></li><li class="sidebar-sub-header"><a href="/#express-nuxt-application" class="sidebar-link">Express/Nuxt application</a></li></ul></li><li><a href="/#api-documentation" class="sidebar-link">API documentation</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/#editor-s-editable-mobile-preview" class="sidebar-link">Editor's editable mobile preview</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/#templates-preview-block-thumbs" class="sidebar-link">templates preview &amp; block thumbs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/#controlling-the-template-display" class="sidebar-link">controlling the template display</a></li><li class="sidebar-sub-header"><a href="/#on-the-server" class="sidebar-link">on the server</a></li><li class="sidebar-sub-header"><a href="/#in-local" class="sidebar-link">in local</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="badsender-email-builder"><a href="#badsender-email-builder" class="header-anchor">#</a> Badsender email builder</h1> <p>The badsender application is build around <a href="https://github.com/voidlabs/mosaico" target="_blank" rel="noopener noreferrer">Voidlabs' Mosaico mailing editor<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> <strong>Voidlabs' Mosaico</strong> is a standalone front application build upon <a href="https://knockoutjs.com/" target="_blank" rel="noopener noreferrer">Knockout<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>The <strong>Mosaico editor</strong> is build around two main key concepts:</p> <ul><li><strong>template:</strong> an HTML file that will define any interactive blocks &amp; their data representation</li> <li><strong>mailing:</strong> a JSON object based on the template used</li></ul> <p>The <strong>Badsender's backend</strong> will:</p> <ul><li>persist <strong>templates</strong> &amp; <strong>mailings</strong></li> <li>handle <strong>users</strong></li> <li>handle rights to templates &amp; mailings via the concept of <strong>groups</strong></li> <li>handle <strong>images storage</strong></li></ul> <p>The <strong>Badsender's backend</strong> is build upon <a href="https://nuxtjs.org/" target="_blank" rel="noopener noreferrer">NuxtJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>/<a href="https://vuejs.org/" target="_blank" rel="noopener noreferrer">VueJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://expressjs.com/" target="_blank" rel="noopener noreferrer">ExpressJS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> &amp; <a href="https://www.mongodb.com/" target="_blank" rel="noopener noreferrer">MongoDB<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="/assets/img/badsender-architecture.0434feab.svg" alt="badsender architecture"></p> <h2 id="files-organization"><a href="#files-organization" class="header-anchor">#</a> files organization</h2> <h3 id="inherited-folders-files-from-mosaico"><a href="#inherited-folders-files-from-mosaico" class="header-anchor">#</a> inherited folders &amp; files from mosaico</h3> <table><thead><tr><th>Name</th> <th>mosaico's scope</th></tr></thead> <tbody><tr><td>packages/editor/CONTRIBUTING.md</td> <td>contributing guidelines</td></tr> <tr><td>packages/editor/LICENSE</td> <td></td></tr> <tr><td>packages/editor/NOTICE.txt</td> <td>editor dependencies license</td></tr> <tr><td>packages/editor/README.md</td> <td>original mosaicos's README</td></tr> <tr><td>packages/editor/appveyor.yml</td> <td></td></tr> <tr><td>packages/editor/backend</td> <td>simple development backend</td></tr> <tr><td>res</td> <td>editor statics</td></tr> <tr><td>packages/editor/server-config.js</td> <td>simple testing backend configuration</td></tr> <tr><td>packages/editor/spec</td> <td>app test files</td></tr> <tr><td>packages/editor/src</td> <td>front application source files</td></tr> <tr><td>packages/editor/templates</td> <td>mosaico's template</td></tr></tbody></table> <h3 id="express-nuxt-application"><a href="#express-nuxt-application" class="header-anchor">#</a> Express/Nuxt application</h3> <table><thead><tr><th>Name</th> <th>mosaico's scope</th></tr></thead> <tbody><tr><td>packages/server</td> <td>all the files for back server, scoped by domain (Express)</td></tr> <tr><td>packages/ui</td> <td>all the files for front (Nuxt)</td></tr> <tr><td>packages/documentation</td> <td>all documentation relative to Badsender's code</td></tr> <tr><td>packages/documentation/api</td> <td>API doc generated by <a href="https://apidocjs.com/" target="_blank" rel="noopener noreferrer">apiDoc<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> with the command <code>build:api-documentation</code></td></tr> <tr><td>gulpfile</td> <td>build script replacement for the Grunfile.<br> This allowed us to fine-tune the build process without mangling with the original script</td></tr> <tr><td>node.config.js</td> <td>all configuration variables (handled by <a href="https://www.npmjs.com/package/rc" target="_blank" rel="noopener noreferrer">rc package<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>)</td></tr> <tr><td>nuxt.config.js</td> <td>The <a href="https://nuxtjs.org/api/configuration-build" target="_blank" rel="noopener noreferrer">nuxt configuration<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><br> use some variables of the node.config.js</td></tr> <tr><td>.nvmrc</td> <td>The <a href="https://github.com/nvm-sh/nvm" target="_blank" rel="noopener noreferrer">nvm (Node Version Manager)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> configuration file</td></tr> <tr><td>Procfile</td> <td><a href="https://devcenter.heroku.com/articles/procfile" target="_blank" rel="noopener noreferrer">Heroku file<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> to launch server process</td></tr></tbody></table> <h2 id="api-documentation"><a href="#api-documentation" class="header-anchor">#</a> API documentation</h2> <p>will be exposed on the route <code>/api/documentation</code></p> <h2 id="editor-s-editable-mobile-preview"><a href="#editor-s-editable-mobile-preview" class="header-anchor">#</a> Editor's editable mobile preview</h2> <p>Mosaico give us the ability to preview a mobile template.<br>
It does that by rendering the HTML in a iFrame.</p> <p>In order to enable it on the editable part we rely on some <em>hacks</em>:</p> <ul><li><p>Mosaico add <code>.is-mobile-preview</code> or <code>.is-desktop-preview</code> classes to the <code>#page</code> in accordance to the preview button state</p></li> <li><p>Mosaico was modified to prevent the automatic <code>#main-wysiwyg-area</code> scoping to the template class if <code>#main-wysiwyg-area</code> is already found in the rule</p> <ul><li>the automatic style scoping prevent styles coming from the template to leak in the editor</li> <li>this is not the case in the iFrame preview (already scoped by the iFrame)</li></ul></li></ul> <p>In order to achieve a coherent rendering between the preview &amp; the editable part you will need in your templates to:</p> <ul><li>copy the content of your media queries</li> <li>duplicate them in class scoped by <code>.is-mobile-preview #main-wysiwyg-area</code> or <code>.is-desktop-preview #main-wysiwyg-area</code></li></ul> <p>Those classes are not (yet) remove during download</p> <h2 id="templates-preview-block-thumbs"><a href="#templates-preview-block-thumbs" class="header-anchor">#</a> templates preview &amp; block thumbs</h2> <h3 id="controlling-the-template-display"><a href="#controlling-the-template-display" class="header-anchor">#</a> controlling the template display</h3> <p>From the <a href="https://github.com/voidlabs/mosaico/issues/246" target="_blank" rel="noopener noreferrer">creator answer<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <blockquote><p>[…]<a href="https://github.com/voidlabs/mosaico/wiki/Template-language#data-ko-attributes" target="_blank" rel="noopener noreferrer">data-ko-display<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> will remove any <code>display: none</code> style from the element it is applied to. […] So your &quot;html&quot; can be opened in a browser and show you a correct version of your template […].</p> <p><strong>The &quot;thumbnailer&quot; task also add a <code>preview</code> class to the body of your template before previewing.</strong> This means that you can even add custom CSS styles that will only be applied during the preview, e.g:</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span> <span class="token attr-name">data-ko-remove</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">.preview .block</span> <span class="token punctuation">{</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 3px solid red<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>This style will be removed by mosaico, but will be used by the thumbnailer.</p></blockquote> <h3 id="on-the-server"><a href="#on-the-server" class="header-anchor">#</a> on the server</h3> <p>just go on the template page &amp; click on <code>generate preview</code></p> <h3 id="in-local"><a href="#in-local" class="header-anchor">#</a> in local</h3> <p>mailing should be under the <code>/templates</code> folder</p> <div class="language- extra-class"><pre class="language-text"><code>yarn thumbnail
</code></pre></div><p>thumbnails will be generated in the <code>edres</code> mailing folder</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5a65e93c.js" defer></script><script src="/assets/js/2.27aee9da.js" defer></script><script src="/assets/js/6.3e3e9179.js" defer></script>
  </body>
</html>
