var templateSystem = require('../src/js/bindings/choose-template.js');
document.addEventListener('DOMContentLoaded', function (event) {
  templateSystem.addTemplate(
    'array',
    '<!-- ko foreach: $data --><!-- ko block: $data --><!-- /ko --><!-- /ko -->'
  );
  templateSystem.addTemplate(
    'block-show',
    '<!-- ko block: $data, scrollIntoView: $root.selectedBlock() === $data --><!-- /ko -->'
  );
  templateSystem.addTemplate(
    'block-wysiwyg',
    "<div class=\x22editable block\x22 data-drop-content=\x22Drop here\x22 data-bind=\x22attr: { 'data-drop-content': $root.t('Drop here') }, click: function(obj, evt) { $root.selectBlock(obj); return true }, clickBubble: false, css: { selected: $root.selectedBlock() === $data }, scrollIntoView: $root.selectedBlock() === $data\x22>  <div class=\x22mo-blockselectionhelper\x22></div>  <div class=\x22tools\x22 data-bind=\x22tooltips: {}\x22>    <!-- ko if: typeof $index != 'undefined' -->    <div title=\x22Drag this handle to move the block\x22 data-bind=\x22attr: { title: $root.t('Drag this handle to move the block') }\x22 class=\x22tool handle\x22><i class=\x22fa fa-fw fa-sort\x22></i></div>    <!-- ko if: $index() > 0 -->    <div title=\x22Move this block upside\x22 data-bind=\x22attr: { title: $root.t('Move this block upside') }\x22 class=\x22tool moveup\x22><i class=\x22fa fa-fw fa-sort-asc\x22 data-bind='click: $root.moveBlock.bind($element, $index, $parent, true)'></i></div>    <!-- /ko -->    <!-- ko if: $index() < $parent.blocks().length -1 -->    <div title=\x22Move this block downside\x22 data-bind=\x22attr: { title: $root.t('Move this block downside') }\x22 class=\x22tool movedown\x22><i class=\x22fa fa-fw fa-sort-desc\x22 data-bind='click: $root.moveBlock.bind($element, $index, $parent, false)'></i></div>    <!-- /ko -->    <div title=\x22Delete block\x22 class=\x22tool delete\x22 data-bind=\x22attr: { title: $root.t('Delete block') }, click: $root.removeBlock.bind($element, $rawData, $parent)\x22><i class=\x22fa fa-fw fa-trash-o\x22></i></div>    <div title=\x22Duplicate block\x22 class=\x22tool clone\x22 data-bind=\x22attr: { title: $root.t('Duplicate block') }, click: $root.duplicateBlock.bind($element, $index, $parent)\x22><i class=\x22fa fa-fw fa-files-o\x22></i></div>    <!-- /ko -->    <!-- ko if: typeof $data._nextVariant != 'undefined' --><div title=\x22Switch block variant\x22 class=\x22tool variant\x22 data-bind=\x22attr: { title: $root.t('Switch block variant') }, click: $data._nextVariant\x22><i class=\x22fa fa-fw fa-magic\x22></i></div><!-- /ko -->  </div>  <!-- ko block: $data --><!-- /ko --></div>"
  );
  templateSystem.addTemplate(
    'blocks-show',
    "<!-- ko template: { name: 'block-show', foreach: blocks } --><!-- /ko -->"
  );
  templateSystem.addTemplate(
    'blocks-wysiwyg',
    "<div class=\x22sortable-blocks-edit\x22 data-drop-content=\x22Drop here\x22 data-empty-content=\x22Drop here blocks from the Blocks tab\x22 data-bind=\x22attr: { 'data-drop-content': $root.t('Drop here'), 'data-empty-content': $root.t('Drop here blocks from the &quot;Blocks&quot; tab') }, css: { 'empty': ko.utils.unwrapObservable(blocks).length == 0 }, extsortable: { connectClass: 'sortable-blocks-edit', template: 'block-wysiwyg', data: blocks, dragging: $root.dragging, beforeMove: $root.startMultiple, afterMove: $root.stopMultiple, options: { handle: '.handle', placeholder: $root.placeholderHelper } }\x22></div>"
  );
  templateSystem.addTemplate(
    'customstyle',
    "<div class=\x22customStyleHelp\x22 data-bind=\x22html: $root.t('Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class=&quot;customStyled&quot;><span>&quot;small cube&quot; </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul>')\x22>Customized block.<ul><li>In this status changes to properties will be specific to the current block (instead of being global to all blocks in the same section)</li><li>A <span class=\x22customStyled\x22><span>\x22small cube\x22 </span></span> icon beside the property will mark the customization. By clicking this icon the property value will be reverted to the value defined for the section.</li></ul></div>"
  );
  templateSystem.addTemplate('empty', '');
  templateSystem.addTemplate(
    'error',
    '[<div style=\x22background-color: #fff0f0\x22 data-bind=\x22text: ko.toJS($data)\x22></div>]'
  );
  templateSystem.addTemplate(
    'img-wysiwyg',
    "<table tabfocus=\x220\x22 cellspacing=\x220\x22 cellpadding=\x220\x22 data-drop-content=\x22Drop here\x22 data-bind=\x22style: _stylebind, click: function(obj, evt) { $root.selectItem(_item, _data); return true; }, clickBubble: false, fudroppable: { activeClass: 'ui-state-highlight', hoverClass: 'ui-state-draghover' }, extdroppable: { options: { accept: '.image', activeClass: 'ui-state-highlight', hoverClass: 'ui-state-draghover' }, data: _src, dragged: $root.fileToImage }, css: { selecteditem: $root.isSelectedItem(_item) }, scrollIntoView: $root.isSelectedItem(_item), attr: { 'data-drop-content': $root.t('Drop here'), width: _width, height: _height, align: _align }\x22  class=\x22img-wysiwyg selectable-img\x22 style=\x22display: table;\x22><tr><td class=\x22uploadzone\x22>  <div class=\x22mo-imgselectionhelper\x22></div>  <div class=\x22mo-uploadzone\x22></div>  <div class=\x22img-size\x22 data-bind=\x22text: _size\x22>size</div>  <div class=\x22midtools\x22 data-bind=\x22tooltips: {}\x22>    <!-- ko if: _src() != '' -->    <div title=\x22Remove image\x22 class=\x22tool delete\x22 data-bind=\x22attr: { title: $root.t('Remove image') }, click: _src.bind(_src, ''), clickBubble: false\x22><i class=\x22fa fa-fw fa-trash-o\x22></i></div>    <!-- ko if: typeof $root.editImage !== 'undefined' -->    <div title=\x22Open the image editing tool\x22 class=\x22tool edit\x22 data-bind=\x22attr: { title: $root.t('Open the image editing tool') }, click: $root.editImage.bind($element, _src), clickBubble: false\x22><i class=\x22fa fa-fw fa-pencil\x22></i></div>    <!-- /ko -->    <!-- /ko -->    <!-- ko if: _src() == '' -->    <div title=\x22Upload a new image\x22 data-bind=\x22attr: { title: $root.t('Upload a new image') }\x22 class=\x22tool upload\x22 style=\x22position: relative; overflow: hidden;\x22><i class=\x22fa fa-fw fa-upload\x22></i>      <input class=\x22fileupload nofile\x22 type=\x22file\x22 name=\x22files[]\x22 data-bind=\x22fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.loadMailingImage, canvasPreview: true }\x22 style=\x22z-index: 20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-size: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block\x22>    </div>    <!-- ko if: typeof $root.selectImage !== 'undefined' -->    <div title=\x22Select from gallery\x22 class=\x22tool gallery\x22 data-bind=\x22attr: { title: $root.t('Select from gallery') }, click: $root.selectImage.bind($element, _src), clickBubble: true\x22><i class=\x22fa fa-fw fa-picture-o\x22></i></div>    <!-- /ko -->    <!-- /ko -->  </div>  <!-- ko template: _template --><!-- /ko -->  <!-- ko if: _src() == '' -->    <!--    <img style=\x22display: block;\x22 class=\x22imgplaceholder\x22 width=\x22200\x22 src=\x22\x22 alt=\x22Insert an image here\x22 data-bind=\x22wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }\x22 />    -->    <span class=\x22fileuploadtext\x22 style=\x22text-align: center; display: -ms-flexbox; display: flex; align-items: center; flex-align: center; justify-content: center; padding: 1em; position: absolute; top: 0; left: 0; right: 0; bottom: 0;\x22><span class=\x22textMiddle\x22 style=\x22 text-shadow: 1px 1px 0 #FFFFFF, 0 0 10px #FFFFFF; font-weight: bold;\x22 data-bind=\x22text: $root.t('Drop an image here')\x22>Drop an image here</span></span>  <!-- /ko -->  <!-- ko if: _src() != '' -->  <!--    <img style=\x22display: block;\x22 width=\x22200\x22 src=\x22\x22 data-bind=\x22preloader: _src, wysiwygSrc: { src: _src.preloaded, placeholder: _placeholdersrc, width: _width, height: _height, method: _method }\x22 />    -->  <!-- /ko -->  <!-- pulsante per la cancellazione -->  <div title=\x22Drop an image here or click the upload button\x22 data-bind=\x22attr: { title: $root.t('Drop an image here or click the upload button') }, tooltips: {}\x22 class=\x22workzone\x22 style=\x22position: absolute; top: 0; left: 0; right: 0; bottom: 0; overflow: hidden;\x22>    <!-- ko if: _src.preloaded && _src() != _src.preloaded() -->PRELOADING....<!-- /ko -->    <!-- ko if: _src() != '' -->      <input class=\x22fileupload withfile\x22 type=\x22file\x22 name=\x22files[]\x22 data-bind=\x22fileupload: { data: _src, onerror: $root.notifier.error, onfile: $root.mailingGallery.unshift.bind($root.mailingGallery), canvasPreview: true }\x22 style=\x22z-index: -20; position: absolute; top: 0; left: 0; right: 0; bottom: 0; min-width: 100%; min-height: 100%; font-zie: 999px; text-align: right; filter: alpha(opacity=0); opacity: 0; outline: none; cursor: inherit; display: block\x22>    <!-- /ko -->    <div class=\x22progress\x22 style=\x22opacity: .5; width: 80%; margin-left: 10%; position: absolute; bottom: 30%; height: 20px; border: 2px solid black;\x22>      <div class=\x22progress-bar progress-bar-success\x22 style=\x22height: 20px; background-color: black; \x22></div>    </div>  </div></table>"
  );
  templateSystem.addTemplate(
    'main',
    "<div id=\x22page\x22 style=\x22display: none;\x22 data-bind=\x22visible: true, css: { withToolbox: $root.showToolbox, 'is-both-preview': isBothPreview, 'is-desktop-preview': isDesktopPreview, 'is-mobile-preview': isMobilePreview }\x22>  <div id=\x22main-edit-area\x22 data-bind=\x22click: function(obj, evt) { $root.selectBlock(null); $root.bsEventsHub.windowClick(evt); return true; }, clickBubble: false\x22>    <!-- ko withProperties: { templateMode: 'wysiwyg', templateModeFallback: 'show' } -->    <div id=\x22main-wysiwyg-area\x22 data-bind=\x22wysiwygScrollfix: true, scrollable: true, fudroppable: { active: draggingImage }, css: { isdragging: dragging, isdraggingimg: draggingImage }, block: content\x22></div>    <!-- /ko -->  </div>  <div id=\x22toolbar\x22 class=\x22mo\x22 data-bind=\x22tooltips: {}\x22>    <!-- ko if: typeof $root.undo != 'undefined' -->    <span data-bind=\x22buttonset: { }\x22 class=\x22leftButtons\x22>    <a title=\x22Undo last operation\x22 href=\x22javascript:void(0)\x22 data-bind=\x22attr: { title: $root.t('Undo last operation') }, click: $root.undo.execute, clickBubble: false, button: { disabled: !$root.undo.enabled(), icons: { primary: 'fa fa-reply' }, label: $root.undo.name, text: true }\x22>UNDO</a>    <a title=\x22Redo last operation\x22 href=\x22javascript:void(0)\x22 data-bind=\x22attr: { title: $root.t('Redo last operation') }, click: $root.redo.execute, clickBubble: false, button: { disabled: !$root.redo.enabled(), icons: { primary: 'fa fa-share' }, label: $root.redo.name, text: true }\x22>REDO</a>    </span>    <!-- ko if: $root.debug -->    <a href=\x22javascript:void(0)\x22 data-bind=\x22click: $root.undoReset, clickBubble: false, button: { disabled: !$root.undo.enabled() && !$root.redo.enabled(), label: 'reset', text: true }\x22>RESET</a>    <!-- /ko -->    <!-- /ko -->    <span>    <input id=\x22showGallery\x22 type=\x22checkbox\x22 data-bind=\x22checked: $root.showGallery, button: { refreshOn: $root.showGallery,    icons: { primary: 'fa fa-fw fa-picture-o', secondary: null }, text: true, label: $root.t('Gallery') }\x22><label title=\x22Show image gallery\x22 for=\x22showGallery\x22 data-bind=\x22attr: { title: $root.t('Show image gallery') }\x22>show gallery</label></input>    </span>    <!-- ko template: {name: 'edit-name' } --># creation name #<!-- /ko -->    <input id=\x22previewBoth\x22 type=\x22radio\x22 name=\x22previewMode\x22 value=\x22both\x22 data-bind=\x22checked: $root.previewMode, button: { text: false, label: 'both', icons: { primary: 'fa fa-fw fa-window-restore' } }\x22>      <label for=\x22previewBoth\x22 title=\x22Both screen\x22 data-bind=\x22attr: { title: $root.t('Mobile and desktop') }\x22>Mobile and desktop</label>    </input>    <input id=\x22previewDesktop\x22 type=\x22radio\x22 name=\x22previewMode\x22 value=\x22desktop\x22 data-bind=\x22checked: $root.previewMode, button: { text: false, label: 'desktop', icons: { primary: 'fa fa-fw fa-desktop' } }\x22>      <label for=\x22previewDesktop\x22 title=\x22Desktop\x22 data-bind=\x22attr: { title: $root.t('Desktop') }\x22>Desktop</label>    </input>    <input id=\x22previewMobile\x22 type=\x22radio\x22 name=\x22previewMode\x22 value=\x22mobile\x22 data-bind=\x22checked: $root.previewMode, button: { text: false, label: 'mobile', icons: { primary: 'fa fa-fw fa-tablet' } }\x22>      <label for=\x22previewMobile\x22 title=\x22Smartphone\x22 data-bind=\x22attr: { title: $root.t('Smartphone') }\x22>Smartphone</label>    </input>    <!-- ko if: $root.debug -->    <a href=\x22javascript:void(0)\x22 data-bind=\x22click: $root.export, clickBubble: false, button: { label: 'export', text: true }\x22>EXPORT</a>    <input type=\x22checkbox\x22 data-bind=\x22checked: $root.debug\x22 /> debug    <a href=\x22javascript:void(0)\x22 data-bind=\x22click: $root.loadDefaultBlocks, clickBubble: false, button: { icons: { primary: 'fa fa-fw fa-upload' }, label: 'Default', text: true }\x22>LOAD BLOCKS</a>    [<a id=\x22subscriptionsCount\x22 href=\x22javascript:viewModel.loopSubscriptionsCount()\x22>subs</a>]    <!-- /ko -->    <span data-bind=\x22visible: false\x22>    <input type=\x22checkbox\x22 data-bind=\x22checked: $root.showToolbox\x22 /> toolbox    </span>    <div class=\x22rightButtons\x22>    <!-- ko if: typeof $root.save !== 'undefined' -->    <a title=\x22Save template\x22 href=\x22javascript:void(0)\x22 data-bind=\x22attr: { title: $root.t('Save template') }, click: $root.save.execute, clickBubble: false, button: { disabled: !$root.save.enabled(), icons: { primary: 'fa fa-fw fa-cloud-upload' }, label: $root.t($root.save.name), text: true }\x22>SALVA</a>    <!-- /ko -->    <!-- ko if: typeof $root.test !== 'undefined' -->    <a title=\x22Show preview and send test\x22 href=\x22javascript:void(0)\x22 data-bind=\x22attr: { title: $root.t('Show preview and send test') }, click: $root.test.execute, clickBubble: false, button: { disabled: !$root.test.enabled(), icons: { primary: 'fa fa-fw fa-paper-plane' }, label: $root.t($root.test.name), text: true }\x22>TEST</a>    <!-- /ko -->    <!-- ko template: {name: 'download-buttons' } --># download buttons #<!-- /ko -->    </div>  </div>  <!-- ko template: {name: 'dialog-select-image' } --># dialog image selection #<!-- /ko -->  <!-- ko if: $root.showToolbox -->  <div id=\x22main-toolbox\x22 class=\x22mo\x22 data-bind=\x22scrollable: true, withProperties: { templateMode: 'edit' }\x22>    <div data-bind=\x22template: { name: 'toolbox' }\x22></div>  </div>  <!-- /ko -->  <!-- <div id=\x22main-preview\x22 class=\x22mo\x22 data-bind=\x22scrollable: true, if: $root.showPreviewFrame\x22>    <div id=\x22preview-toolbar\x22>      <div data-bind=\x22visible: $root.showPreviewFrame, buttonset: { }\x22 style=\x22display: inline-block\x22>        <input id=\x22previewLarge\x22 type=\x22radio\x22 name=\x22previewMode\x22 value=\x22large\x22 data-bind=\x22checked: $root.previewMode, button: { text: false, label: 'large', icons: { primary: 'fa fa-fw fa-desktop' } }\x22 />        <label for=\x22previewLarge\x22 title=\x22Large screen\x22 data-bind=\x22attr: { title: $root.t('Large screen') }\x22>Large screen</label>        <input id=\x22previewDesktop\x22 type=\x22radio\x22 name=\x22previewMode\x22 value=\x22desktop\x22 data-bind=\x22checked: $root.previewMode, button: { text: false, label: 'desktop', icons: { primary: 'fa fa-fw fa-tablet' } }\x22 />        <label for=\x22previewDesktop\x22 title=\x22Tablet\x22 data-bind=\x22attr: { title: $root.t('Tablet') }\x22>Tablet</label>        <input id=\x22previewMobile\x22 type=\x22radio\x22 name=\x22previewMode\x22 value=\x22mobile\x22 data-bind=\x22checked: $root.previewMode, button: { text: false, label: 'mobile', icons: { primary: 'fa fa-fw fa-mobile' } }\x22 />        <label for=\x22previewMobile\x22 title=\x22Smartphone\x22 data-bind=\x22attr: { title: $root.t('Smartphone') }\x22>Smartphone</label>      </div>    </div>    <div id=\x22frame-container\x22 data-bind=\x22css: { desktop: $root.previewMode() == 'desktop', mobile: $root.previewMode() == 'mobile', large: $root.previewMode() == 'large' }\x22>      <iframe data-bind=\x22bindIframe: $data\x22></iframe>    </div>  </div> -->  <div class=\x22mo\x22 id=\x22mo-body\x22></div>  <div id=\x22incompatible-template\x22 title=\x22Saved model is obsolete\x22 style=\x22display: none\x22 data-bind=\x22attr: { title: $root.t('Saved model is obsolete') }, html: $root.t('<p>The saved model has been created with a previous, non completely compatible version, of the template</p><p>Some content or style in the model <b>COULD BE LOST</b> if you will <b>save</b></p><p>Contact us for more informations!</p>')\x22>    Incompatible template  </div>  <div id=\x22fake-image-editor\x22 title=\x22Fake image editor\x22 style=\x22display: none\x22 data-bind=\x22attr: { title: $root.t('Fake image editor') }, html: $root.t('<p>Fake image editor</p>')\x22>    <p>Fake image editor</p>  </div></div><!-- ko if: $root.logoPath --><div id=\x22loading\x22 class=\x22loading\x22 style=\x22display: block; width: 300px; text-align: center; height: 32px; position: absolute; top:0; bottom: 0; left: 0; right: 0;  margin: auto;\x22 data-bind=\x22attr: { style: 'position: absolute; top: 5px; left: 6px; z-index: 150;'}, css: { loading: false }\x22>  <a href=\x22/\x22 data-bind=\x22attr: { href: $root.logoUrl, alt: $root.logoAlt }\x22><img data-bind=\x22attr: { src: $root.logoPath }\x22 width=\x2232\x22 height=\x2232\x22 alt=\x22mosaico\x22 border=\x220\x22 /></a>  <div style=\x22opacity: 0\x22 data-bind=\x22visible: false\x22>Oppps... !!</div></div><!-- /ko -->"
  );
  templateSystem.addTemplate(
    'dialog-select-image',
    "<!-- ko if: $root.showDialogGallery() --><!-- should use ui-dialog --><aside id=\x22dialogGallery\x22 class=\x22mo\x22>  <div    class=\x22tabs_horizontal\x22    data-bind=\x22tabs: { active: $root.selectedImageTab }\x22  >    <div class=\x22close\x22 data-bind=\x22click: $root.closeDialogGallery;\x22>X</div>    <ul>      <li data-bind=\x22tooltips: {}\x22>        <a          title=\x22gallery-mailing\x22          data-local=\x22true\x22          href=\x22#dialoggallerymailing\x22          data-bind=\x22attr: { title: $root.t('gallery-mailing') }, text: $root.t('gallery-mailing')\x22        >          gallery-mailing        </a>      </li>      <li data-bind=\x22tooltips: {}\x22>        <a          title=\x22gallery-template\x22          data-local=\x22true\x22          href=\x22#dialoggallerytemplate\x22          data-bind=\x22attr: { title: $root.t('gallery-template') }, text: $root.t('gallery-template')\x22        >          gallery-template        </a>      </li>    </ul>    <div id=\x22dialoggallerymailing\x22 class=\x22gallery-panel\x22>      <!-- ko template: {name: 'gallery-upload', data: { type: 'mailing' } } -->#      mailing gallery fileupload #<!-- /ko -->      <!-- ko if: $root.mailingGalleryStatus() === false --><a        class=\x22loadbutton\x22        title=\x22Show images from the gallery\x22        href=\x22javascript:void(0)\x22        data-bind=\x22attr: { title: $root.t('Show images from the gallery') }, click: $root.loadMailingGallery, button: { disabled: $root.mailingGalleryStatus, icons: { primary: 'fa fa-fw fa-picture-o' }, label: $root.mailingGalleryStatus() == 'loading' ? $root.t('Loading...') : $root.t('Load gallery'), text: true }\x22        ># load gallery #</a      ><!-- /ko -->      <!-- ko if: $root.mailingGalleryStatus() === 'loading' -->      <div        class=\x22galleryEmpty\x22        data-bind=\x22text: $root.t('gallery-mailing-loading')\x22      >        Loading mailing gallery…      </div>      <!-- /ko -->      <!-- ko if: $root.mailingGalleryStatus() === 0 -->      <div        class=\x22galleryEmpty\x22        data-bind=\x22text: $root.t('gallery-mailing-empty')\x22      >        The mailing gallery is empty      </div>      <!-- /ko -->      <div class=\x22dialog-gallery-wrapper\x22>        <ul data-bind=\x22foreach: mailingGallery\x22>          <!-- ko if: typeof thumbnailUrl != 'undefined' -->          <li data-bind=\x22click: $root.setBgImage.bind($element, name);\x22>            <img              style=\x22display: block;\x22              data-bind=\x22attr: { src: thumbnailUrl }\x22            />          </li>          <!-- /ko -->        </ul>      </div>    </div>    <div id=\x22dialoggallerytemplate\x22 class=\x22gallery-panel\x22>      <!-- ko template: {name: 'gallery-upload', data: { type: 'template' } } -->#      mailing template fileupload #<!-- /ko -->      <!-- ko if: $root.templateGalleryStatus() === false --><a        class=\x22loadbutton\x22        title=\x22Show images from the gallery\x22        href=\x22javascript:void(0)\x22        data-bind=\x22attr: { title: $root.t('Show images from the gallery') }, click: $root.loadTemplateGallery, button: { disabled: $root.templateGalleryStatus, icons: { primary: 'fa fa-fw fa-picture-o' }, label: $root.templateGalleryStatus() == 'loading' ? $root.t('Loading...') : $root.t('Load gallery'), text: true }\x22        ># load gallery #</a      ><!-- /ko -->      <!-- ko if: $root.templateGalleryStatus() === 'loading' -->      <div        class=\x22galleryEmpty\x22        data-bind=\x22text: $root.t('gallery-mailing-loading')\x22      >        Loading template gallery...      </div>      <!-- /ko -->      <!-- ko if: $root.templateGalleryStatus() === 0 -->      <div        class=\x22galleryEmpty\x22        data-bind=\x22text: $root.t('gallery-mailing-empty')\x22      >        The template gallery is empty      </div>      <!-- /ko -->      <div class=\x22dialog-gallery-wrapper\x22>        <ul data-bind=\x22foreach: templateGallery\x22>          <!-- ko if: typeof thumbnailUrl != 'undefined' -->          <li data-bind=\x22click: $root.setBgImage.bind($element, name);\x22>            <img              style=\x22display: block;\x22              data-bind=\x22attr: { src: thumbnailUrl }\x22            />          </li>          <!-- /ko -->        </ul>      </div>    </div>  </div></aside><!-- /ko -->"
  );
  templateSystem.addTemplate(
    'download-buttons',
    "<!-- ko if: typeof $root.download !== 'undefined' --><form  id=\x22downloadForm\x22  class=\x22download-form download-form--cdn\x22  action=\x22#\x22  method=\x22POST\x22  data-bind=\x22    css: { 'download-form--cdn': $root.downloadCdn }  \x22>  <input type=\x22hidden\x22 name=\x22action\x22 value=\x22download\x22 />  <input type=\x22hidden\x22 name=\x22downLoadForCdn\x22 value=\x22false\x22 />  <input type=\x22hidden\x22 name=\x22downLoadForFtp\x22 value=\x22false\x22 />  <input    type=\x22hidden\x22    name=\x22filename\x22    value=\x22email.html\x22    id=\x22downloadHtmlFilename\x22  />  <input type=\x22hidden\x22 name=\x22html\x22 id=\x22downloadHtmlTextarea\x22 />  <!-- ko ifnot: $root.downloadCdn || $root.downloadFtp -->  <a    title=\x22Download template\x22    href=\x22javascript:void(0)\x22    data-bind=\x22      attr: { title: $root.t('Download template') },      click: function (){ $root.download.execute({forCdn: false, forFtp: false}) },      clickBubble: false,      button: {        disabled: !$root.download.enabled(),        icons: { primary: 'fa fa-fw fa-download' },        label: $root.t($root.download.name),        text: true      }    \x22  >    DOWNLOAD  </a>  <!-- /ko -->  <!-- ko if: $root.downloadCdn || $root.downloadFtp  -->  <p    class=\x22download-form__btn-menu\x22    data-bind=\x22      button: {        icons: { primary: 'fa fa-fw fa-download' },        label: $root.t($root.download.name)      }\x22  >    DL CDN  </p>  <aside class=\x22download-form__menu\x22>    <a      href=\x22javascript:void(0)\x22      data-bind=\x22        click: function (){ $root.download.execute({forCdn: false, forFtp: false}) },        clickBubble: false,        button: {          disabled: !$root.download.enabled(),          label: $root.t('dl-btn-regular'),        }      \x22    >      DOWNLOAD REGULAR ZIP    </a>    <!-- ko if: $root.downloadCdn  -->    <a      href=\x22javascript:void(0)\x22      data-bind=\x22        click: function (){ $root.download.execute({forCdn: true, forFtp: false}) },        clickBubble: false,        button: {          disabled: !$root.download.enabled(),          label: $root.cdnButtonLabel,        }\x22    >      DOWNLOAD CDN    </a>    <!-- /ko -->    <!-- ko if: $root.downloadFtp  -->    <a      href=\x22javascript:void(0)\x22      data-bind=\x22        click: function (){ $root.download.execute({forCdn: false, forFtp: true}) },        clickBubble: false,        button: {          disabled: !$root.download.enabled(),          label: $root.ftpButtonLabel,        }\x22    >      DOWNLOAD FTP    </a>    <!-- /ko -->  </aside>  <!-- /ko --></form><!-- /ko -->"
  );
  templateSystem.addTemplate(
    'edit-name',
    "<!-- ko if: $root.titleMode() == 'edit' || $root.titleMode() == 'saving' --><form class=\x22creation-name\x22 data-bind=\x22submit: saveEditCreationName, submitBubble: false\x22>  <input type=\x22text\x22 data-bind=\x22value: $root.metadata.name, disable: $root.titleMode() == 'saving', hasFocus: $root.titleMode() == 'edit'\x22/>  <button type=\x22button\x22 data-bind=\x22click: cancelEditCreationName, clickBubble: false, disable: $root.titleMode() == 'saving',  button: { refreshOn: $root.showPreviewFrame, icons: { primary: 'fa fa-fw fa-times', secondary: null }, text: false, label: $root.t('edit-title-cancel') }\x22>cancel</button>  <button type=\x22submit\x22 data-bind=\x22disable: $root.titleMode() == 'saving',    button: { refreshOn: $root.showPreviewFrame, icons: { primary: 'fa fa-fw fa-check-circle', secondary: null }, text: false, label: $root.t('edit-title-save') }\x22>save</button></form><!-- /ko --><!-- ko if: $root.titleMode() == 'show' --><div class=\x22creation-name\x22>  <p class=\x22ui-button\x22 data-bind=\x22event: { dblclick: enableEditCreationName }, dblclickBubble: false,    attr: { title: $root.t('edit-title-double-click') }\x22>    <span class=\x22ui-button-text\x22 data-bind=\x22text: $root.creationName\x22></span>  </p></div><!-- /ko -->"
  );
  templateSystem.addTemplate(
    'gallery-images',
    "<aside class=\x22gallery-thumbs gallery-thumbs--badsender\x22 data-bind=\x22attr: {'data-type': type}\x22>  <div data-bind=\x22foreach: items\x22>    <div class=\x22draggable-item\x22 data-bind=\x22if: typeof thumbnailUrl != 'undefined'\x22>      <button class=\x22gallery-thumbs__remove\x22 data-bind=\x22click: $root.removeImage.bind($data, $data, $parent.type)\x22>        <i class=\x22fa fa-times\x22></i>      </button>      <div class=\x22draggable image\x22 data-bind=\x22click: $root.addImage, extdraggable: { data: $data, dropContainer: '#main-wysiwyg-area', dragging: $root.draggingImage, 'options': { 'appendTo': '#page' } }, style: { backgroundImage: 'url(\\'' + thumbnailUrl + '\\')' }\x22>        <img title=\x22Drag this image and drop it on any template image placeholder\x22 style=\x22display: block;\x22 data-bind=\x22tooltips: {}, attr: { src: thumbnailUrl, 'title': $root.t('Drag this image and drop it on any template image placeholder') }\x22/>      </div>    </div>  </div></aside>"
  );
  templateSystem.addTemplate(
    'gallery-upload',
    "<div data-drop-content=\x22Drop here\x22 class=\x22img-dropzone pane uploadzone\x22 data-bind=\x22attr: { 'data-drop-content': $root.t('Drop here') }, fudroppable: { activeClass: 'ui-state-highlight', hoverClass: 'ui-state-draghover' }\x22>  <div class=\x22mo-uploadzone\x22>    <!-- ko if: type === 'mailing' -->      <input        class=\x22fileupload\x22        type=\x22file\x22        multiple        name=\x22files[]\x22        data-bind=\x22fileupload: { onerror: $root.notifier.error, onfile: $root.loadMailingImage, cropImage: true }\x22      >    <!-- /ko -->    <!-- ko if: type === 'template' -->      <input        class=\x22fileupload\x22        type=\x22file\x22        multiple        name=\x22files[]\x22        data-bind=\x22fileupload: { onerror: $root.notifier.error, onfile: $root.loadTemplateImage, uploadToTemplate: true, cropImage: true }\x22>    <!-- /ko -->    <span data-bind=\x22text: $root.t('Click or drag files here')\x22>Click or drag files here</span>      <div class=\x22workzone\x22>        <div class=\x22progress\x22>          <div class=\x22progress-bar progress-bar-success\x22></div>        </div>      </div>  </div></div>"
  );
  templateSystem.addTemplate(
    'toolbox',
    "<div id=\x22tooltabs\x22 class=\x22tabs_horizontal button_color\x22 data-bind=\x22tabs: { active: $root.selectedTool }\x22>  <div class=\x22tooltabs__top-bar\x22>    <a class=\x22tooltabs__top-logo\x22 href=\x22/\x22 data-bind=\x22attr: { href: $root.logoUrl }\x22>      <img data-bind=\x22attr: { src: $root.logoPath, alt: $root.logoAlt }\x22 alt=\x22mosaico\x22  />    </a>    <ul class=\x22tooltabs__list\x22>      <li class=\x22tooltabs__item\x22 data-bind=\x22tooltips: {}\x22><a title=\x22Blocks ready to be added to the template\x22 data-local=\x22true\x22 href=\x22#toolblocks\x22 data-bind=\x22attr: { title: $root.t('Blocks ready to be added to the template') }\x22><i class=\x22fa fa-fw fa-cubes\x22></i> <span data-bind=\x22html: $root.t('Blocks')\x22>Blocks</span></a></li>      <li class=\x22tooltabs__item\x22 data-bind=\x22tooltips: {}\x22><a title=\x22Edit content options\x22 href=\x22#toolcontents\x22 data-local=\x22true\x22 data-bind=\x22attr: { title: $root.t('Edit content options') }\x22><i class=\x22fa fa-fw fa-pencil\x22></i> <span data-bind=\x22html: $root.t('Content')\x22>Content</span></a></li>      <li class=\x22tooltabs__item\x22 data-bind=\x22tooltips: {}\x22><a title=\x22Edit style options\x22 href=\x22#toolstyles\x22 data-local=\x22true\x22 data-bind=\x22attr: { title: $root.t('Edit style options') }\x22><i class=\x22fa fa-fw fa-paint-brush\x22></i> <span data-bind=\x22html: $root.t('Style')\x22>Style</span></a></li>    </ul>  </div>  <div id=\x22toolblocks\x22 data-bind=\x22scrollable: true\x22>    <div class=\x22block-list\x22 data-bind=\x22foreach: blockDefs\x22 style=\x22text-align: center\x22>      <div class=\x22draggable-item\x22 data-bind=\x22withProperties: { templateMode: 'show' }\x22>        <div class=\x22block\x22 data-bind=\x22extdraggable: { connectClass: 'sortable-blocks-edit', data: $data, dropContainer: '#main-wysiwyg-area', dragging: $root.dragging, 'options': { handle: '.handle', distance: 10, 'appendTo': '#page' } }, click: $root.addBlock\x22 style=\x22position: relative;\x22>          <div title=\x22Click or drag to add this block to the template\x22 class=\x22handle\x22 data-bind=\x22attr: { title: $root.t('Click or drag to add this block to the template') }, tooltips: {}\x22></div>          <img data-bind=\x22attr: { alt: $root.t('Block __name__', { name: ko.utils.unwrapObservable(type) }), src: $root.templatePath('edres/'+ko.utils.unwrapObservable(type)+'.png') }\x22 alt=\x22Block __name__\x22 />        </div>        <a href=\x22javascript:void(0)\x22 class=\x22addblockbutton\x22 data-bind=\x22click: $root.addBlock, button: { label: $root.t('Add') }\x22>Add</a>      </div>    </div>  </div>  <div id=\x22toolcontents\x22 data-bind=\x22scrollable: true\x22>    <!-- ko if: $root.selectedBlock() !== null -->    <div data-bind=\x22block: $root.selectedBlock\x22></div>    <!-- /ko -->    <!-- ko if: $root.selectedBlock() == null -->    <div class=\x22noSelectedBlock\x22 data-bind=\x22text: $root.t('By clicking on message parts you will select a block and content options, if any, will show here')\x22>By clicking on message parts you will select a block and content options, if any, will show here</div>    <!-- /ko -->    <!-- ko block: content --><!-- /ko -->  </div>  <div id=\x22toolstyles\x22 data-bind=\x22scrollable: true, withProperties: { templateMode: 'styler' }\x22>    <!-- ko if: typeof $root.content().theme === 'undefined' || typeof $root.content().theme().scheme === 'undefined' || $root.content().theme().scheme() === 'custom' -->      <!-- ko if: $root.selectedBlock() !== null -->      <div data-bind=\x22block: $root.selectedBlock, css: { workLocal: $root.selectedBlock().customStyle, workGlobal: typeof $root.selectedBlock().customStyle === 'undefined' || !$root.selectedBlock().customStyle() }\x22></div>      <!-- /ko -->      <!-- ko if: $root.selectedBlock() == null -->      <div class=\x22noSelectedBlock\x22 data-bind=\x22text: $root.t('By clicking on message parts you will select a block and style options, if available, will show here')\x22>By clicking on message parts you will select a block and style options, if available, will show here</div>      <!-- /ko -->      <div class=\x22workGlobalContent\x22>      <!-- ko block: content --><!-- /ko -->      </div>    <!-- /ko -->  </div><//div>div><div id=\x22toolimages\x22 class=\x22slidebar\x22 data-bind=\x22scrollable: true, css: { hidden: $root.showGallery() === false }\x22>  <div class=\x22close\x22 data-bind=\x22click: $root.showGallery.bind($element, false);\x22>X</div>  <span class=\x22pane-title\x22 data-bind=\x22text: $root.t('gallery-title')\x22>Galleries:</span>  <!-- ko if: $root.showGallery() -->  <div id=\x22toolimagestab\x22 class=\x22tabs_horizontal\x22 data-bind=\x22tabs: { active: $root.selectedImageTab }\x22>    <ul>      <li data-bind=\x22tooltips: {}\x22><a title=\x22gallery-mailing\x22 data-local=\x22true\x22 href=\x22#toolimagesgallery\x22 data-bind=\x22attr: { title: $root.t('gallery-mailing') }, text: $root.t('gallery-mailing')\x22>gallery-mailing</a></li>      <li data-bind=\x22tooltips: {}\x22><a title=\x22gallery-template\x22 data-local=\x22true\x22 href=\x22#toolimagesgallerytemplate\x22 data-bind=\x22attr: { title: $root.t('gallery-template') }, text: $root.t('gallery-template')\x22>gallery-template</a></li>    </ul>    <div id=\x22toolimagesgallery\x22 class=\x22gallery-panel\x22>      <!-- ko template: {name: 'gallery-upload', data: { type: 'mailing' } } --># mailing gallery fileupload #<!-- /ko -->    <!-- ko if: $root.mailingGalleryStatus() === false --><a class=\x22loadbutton\x22 title=\x22Show images from the gallery\x22 href=\x22javascript:void(0)\x22 data-bind=\x22attr: { title: $root.t('Show images from the gallery') }, click: $root.loadMailingGallery, button: { disabled: $root.mailingGalleryStatus, icons: { primary: 'fa fa-fw fa-picture-o' }, label: $root.mailingGalleryStatus() == 'loading' ? $root.t('Loading...') : $root.t('Load gallery'), text: true }\x22># load gallery #</a><!-- /ko -->    <!-- ko if: $root.mailingGalleryStatus() === 'loading' --><div class=\x22galleryEmpty\x22 data-bind=\x22text: $root.t('gallery-mailing-loading')\x22>Loading mailing gallery…</div><!-- /ko -->    <!-- ko if: $root.mailingGalleryStatus() === 0 --><div class=\x22galleryEmpty\x22 data-bind=\x22text: $root.t('gallery-mailing-empty')\x22>The mailing gallery is empty</div><!-- /ko -->    <!-- ko template: {name: 'gallery-images', data: { items: mailingGallery, type: 'mailing' } } --># mailing gallery #<!-- /ko -->    </div>    <div id=\x22toolimagesgallerytemplate\x22 class=\x22gallery-panel\x22>      <!-- ko template: {name: 'gallery-upload', data: { type: 'template' } } --># mailing template fileupload #<!-- /ko -->      <!-- ko if: $root.templateGalleryStatus() === false --><a class=\x22loadbutton\x22 title=\x22Show images from the gallery\x22 href=\x22javascript:void(0)\x22 data-bind=\x22attr: { title: $root.t('Show images from the gallery') }, click: $root.loadTemplateGallery, button: { disabled: $root.templateGalleryStatus, icons: { primary: 'fa fa-fw fa-picture-o' }, label: $root.templateGalleryStatus() == 'loading' ? $root.t('Loading...') : $root.t('Load gallery'), text: true }\x22># load gallery #</a><!-- /ko -->      <!-- ko if: $root.templateGalleryStatus() === 'loading' --><div class=\x22galleryEmpty\x22 data-bind=\x22text: $root.t('gallery-mailing-loading')\x22>Loading template gallery...</div><!-- /ko -->      <!-- ko if: $root.templateGalleryStatus() === 0 --><div class=\x22galleryEmpty\x22 data-bind=\x22text: $root.t('gallery-mailing-empty')\x22>The template gallery is empty</div><!-- /ko -->      <!-- ko template: {name: 'gallery-images', data: { items: templateGallery, type: 'template' } } --># template gallery #<!-- /ko -->    </div>  </div>  <!-- /ko --></div><div id=\x22tooldebug\x22 class=\x22slidebar\x22 data-bind=\x22css: { hidden: $root.debug() === false }\x22>  <div class=\x22close\x22 data-bind=\x22click: $root.debug.bind($element, false);\x22>X</div>  <!-- ko if: $root.debug -->  Content:  <pre data-bind='text: ko.toJSON(content, null, 2)' style=\x22overflow: auto; height: 20%\x22></pre>  BlockDefs:  <pre data-bind='text: ko.toJSON(blockDefs, null, 2)' style=\x22overflow: auto; height: 20%\x22></pre>  <!-- /ko -->  <a href=\x22javascript:void(0)\x22 data-bind=\x22click: $root.exportHTMLtoTextarea.bind($element, '#outputhtml'); clickBubble: false, button: { text: true, label:'Generate' }\x22>Output</a>  <a href=\x22javascript:void(0)\x22 data-bind=\x22click: $root.exportJSONtoTextarea.bind($element, '#outputhtml'); clickBubble: false, button: { text: true, label:'Export' }\x22>Export</a>  <a href=\x22javascript:void(0)\x22 data-bind=\x22click: $root.importJSONfromTextarea.bind($element, '#outputhtml'); clickBubble: false, button: { text: true, label:'Import' }\x22>Import</a>  <textarea id=\x22outputhtml\x22 rows=\x2210\x22 style=\x22width: 100%;\x22></textarea></div><div id=\x22tooltheme\x22 class=\x22ui-widget slidebar\x22 data-bind=\x22css: { hidden: $root.showTheme() === false }\x22>  <div class=\x22close\x22 data-bind=\x22click: $root.showTheme.bind($element, false);\x22>X</div>  <!-- ko withProperties: { templateMode: 'styler' } -->    <!-- ko if: $root.showTheme -->      <!-- ko block: $root.content().theme --><!-- /ko -->    <!-- /ko -->  <!-- /ko --></div>"
  );
});
